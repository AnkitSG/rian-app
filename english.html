<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>English Fun! - Rian's Learning</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="css/style.css">
  <style>
    .letter-btn:active { transform: scale(1.2); }
    .word-part { transition: all 0.3s; }
    .word-part.highlight { transform: scale(1.2); color: #8b5cf6; }
  </style>
</head>
<body class="min-h-screen bg-gradient-to-b from-green-400 to-emerald-600">
  <div id="app"></div>

  <script>
    let currentGame = 'menu';
    let currentBook = 0;
    let currentPage = 0;
    let phonicsMode = 'all'; // 'all' or specific letter

    // Phonics data - letter sounds (not names!)
    const phonics = {
      'A': { sound: 'ah', word: 'Apple', emoji: 'üçé', example: 'a a apple' },
      'B': { sound: 'buh', word: 'Ball', emoji: '‚öΩ', example: 'b b ball' },
      'C': { sound: 'kuh', word: 'Cat', emoji: 'üê±', example: 'c c cat' },
      'D': { sound: 'duh', word: 'Dog', emoji: 'üêï', example: 'd d dog' },
      'E': { sound: 'eh', word: 'Egg', emoji: 'ü•ö', example: 'e e egg' },
      'F': { sound: 'fff', word: 'Fish', emoji: 'üêü', example: 'f f fish' },
      'G': { sound: 'guh', word: 'Goat', emoji: 'üêê', example: 'g g goat' },
      'H': { sound: 'huh', word: 'Hat', emoji: 'üé©', example: 'h h hat' },
      'I': { sound: 'ih', word: 'Igloo', emoji: 'üè†', example: 'i i igloo' },
      'J': { sound: 'juh', word: 'Jam', emoji: 'üçØ', example: 'j j jam' },
      'K': { sound: 'kuh', word: 'Kite', emoji: 'ü™Å', example: 'k k kite' },
      'L': { sound: 'lll', word: 'Lion', emoji: 'ü¶Å', example: 'l l lion' },
      'M': { sound: 'mmm', word: 'Moon', emoji: 'üåô', example: 'm m moon' },
      'N': { sound: 'nnn', word: 'Nest', emoji: 'ü™∫', example: 'n n nest' },
      'O': { sound: 'oh', word: 'Orange', emoji: 'üçä', example: 'o o orange' },
      'P': { sound: 'puh', word: 'Pig', emoji: 'üê∑', example: 'p p pig' },
      'Q': { sound: 'kwuh', word: 'Queen', emoji: 'üë∏', example: 'q q queen' },
      'R': { sound: 'rrr', word: 'Rain', emoji: 'üåßÔ∏è', example: 'r r rain' },
      'S': { sound: 'sss', word: 'Sun', emoji: '‚òÄÔ∏è', example: 's s sun' },
      'T': { sound: 'tuh', word: 'Tree', emoji: 'üå≥', example: 't t tree' },
      'U': { sound: 'uh', word: 'Umbrella', emoji: '‚òÇÔ∏è', example: 'u u umbrella' },
      'V': { sound: 'vvv', word: 'Van', emoji: 'üöê', example: 'v v van' },
      'W': { sound: 'wuh', word: 'Water', emoji: 'üíß', example: 'w w water' },
      'X': { sound: 'ks', word: 'Box', emoji: 'üì¶', example: 'x x box' },
      'Y': { sound: 'yuh', word: 'Yellow', emoji: 'üíõ', example: 'y y yellow' },
      'Z': { sound: 'zzz', word: 'Zebra', emoji: 'ü¶ì', example: 'z z zebra' }
    };

    // Bob Books style - Level 1 books
    const books = [
      {
        title: "Mat",
        cover: "üßí",
        pages: [
          { text: "Mat", image: "üßí", words: ["Mat"] },
          { text: "Mat sat.", image: "üßíü™ë", words: ["Mat", "sat"] },
          { text: "Sam", image: "üë¶", words: ["Sam"] },
          { text: "Sam sat.", image: "üë¶ü™ë", words: ["Sam", "sat"] },
          { text: "Mat sat. Sam sat.", image: "üßíüë¶ü™ë", words: ["Mat", "sat", "Sam", "sat"] }
        ]
      },
      {
        title: "Sam and Mat",
        cover: "üë¶üßí",
        pages: [
          { text: "Sam and Mat.", image: "üë¶üßí", words: ["Sam", "and", "Mat"] },
          { text: "Sam ran.", image: "üë¶üí®", words: ["Sam", "ran"] },
          { text: "Mat ran.", image: "üßíüí®", words: ["Mat", "ran"] },
          { text: "Sam and Mat ran.", image: "üë¶üßíüí®", words: ["Sam", "and", "Mat", "ran"] },
          { text: "Sam and Mat sat.", image: "üë¶üßíü™ë", words: ["Sam", "and", "Mat", "sat"] }
        ]
      },
      {
        title: "The Cat",
        cover: "üê±",
        pages: [
          { text: "A cat.", image: "üê±", words: ["A", "cat"] },
          { text: "A fat cat.", image: "üê±", words: ["A", "fat", "cat"] },
          { text: "The cat sat.", image: "üê±ü™ë", words: ["The", "cat", "sat"] },
          { text: "The cat sat on a mat.", image: "üê±üü´", words: ["The", "cat", "sat", "on", "a", "mat"] },
          { text: "The fat cat sat on a mat.", image: "üê±üü´", words: ["The", "fat", "cat", "sat", "on", "a", "mat"] }
        ]
      },
      {
        title: "The Hat",
        cover: "üé©",
        pages: [
          { text: "A hat.", image: "üé©", words: ["A", "hat"] },
          { text: "Sam has a hat.", image: "üë¶üé©", words: ["Sam", "has", "a", "hat"] },
          { text: "Mat has a hat.", image: "üßíüé©", words: ["Mat", "has", "a", "hat"] },
          { text: "The cat has a hat!", image: "üê±üé©", words: ["The", "cat", "has", "a", "hat"] },
          { text: "Sam and Mat and the cat. All have hats!", image: "üë¶üßíüê±üé©", words: ["Sam", "and", "Mat", "and", "the", "cat", "All", "have", "hats"] }
        ]
      }
    ];

    // Speak function with phonics support
    function speak(text, rate = 0.8) {
      if ('speechSynthesis' in window) {
        window.speechSynthesis.cancel();
        const u = new SpeechSynthesisUtterance(text);
        u.rate = rate;
        u.pitch = 1.0;
        u.lang = 'en-US';
        window.speechSynthesis.speak(u);
      }
    }

    // Speak letter sound - SLOW and CLEAR for toddlers
    function speakLetter(letter) {
      const data = phonics[letter];
      if (data) {
        const btn = document.getElementById('letter-' + letter);
        
        // Step 1: Say the letter sound slowly
        speakSlow(data.sound, 0.5);
        
        // Step 2: Pause, then say sound again
        setTimeout(() => {
          speakSlow(data.sound, 0.5);
        }, 1000);
        
        // Step 3: Pause, then say the word
        setTimeout(() => {
          speakSlow(data.word, 0.55);
        }, 2000);
        
        // Animate the letter
        if (btn) {
          btn.classList.add('pop');
          setTimeout(() => btn.classList.remove('pop'), 400);
        }
      }
    }
    
    // Extra slow speech for toddlers
    function speakSlow(text, rate = 0.5) {
      if ('speechSynthesis' in window) {
        window.speechSynthesis.cancel();
        const u = new SpeechSynthesisUtterance(text);
        u.rate = rate;  // Very slow
        u.pitch = 1.0;
        u.lang = 'en-US';
        window.speechSynthesis.speak(u);
      }
    }

    // Speak word slowly (for reading) - TODDLER SPEED
    function speakWord(word) {
      speakSlow(word, 0.45);
    }

    // Read word by word with highlighting - SLOW with long pauses
    function readAloud() {
      const page = books[currentBook].pages[currentPage];
      const words = page.text.split(' ');
      let i = 0;
      
      function sayNext() {
        if (i >= words.length) {
          // Clear highlights at end
          document.querySelectorAll('.word-span').forEach(el => el.classList.remove('highlight'));
          return;
        }
        
        // Highlight current word
        document.querySelectorAll('.word-span').forEach((el, idx) => {
          el.classList.toggle('highlight', idx === i);
        });
        
        speakSlow(words[i].replace(/[.,!]/g, ''), 0.45);
        i++;
        // Long pause between words for toddler comprehension
        setTimeout(sayNext, 1200);
      }
      sayNext();
    }

    // Navigation
    function goMenu() { currentGame = 'menu'; render(); }
    function goPhonics() { currentGame = 'phonics'; render(); }
    function goBooks() { currentGame = 'books'; render(); }
    function openBook(idx) { currentBook = idx; currentPage = 0; currentGame = 'reading'; render(); }
    function nextPage() { 
      if (currentPage < books[currentBook].pages.length - 1) {
        currentPage++; 
        render();
      }
    }
    function prevPage() {
      if (currentPage > 0) {
        currentPage--;
        render();
      }
    }

    function render() {
      const app = document.getElementById('app');
      let html = '';

      if (currentGame === 'menu') {
        html = `
          <div class="min-h-screen flex flex-col items-center justify-center p-4">
            <a href="index.html" class="absolute top-4 left-4 bg-white/30 text-white rounded-full w-12 h-12 flex items-center justify-center text-2xl btn-bounce no-underline">‚Üê</a>
            
            <div class="bg-white rounded-3xl shadow-2xl p-6 max-w-sm w-full text-center">
              <div class="text-6xl mb-3">üìö</div>
              <h1 class="text-3xl font-bold text-green-600 mb-2">English Fun!</h1>
              <p class="text-gray-500 mb-6">Learn to read with Rian!</p>
              
              <div class="space-y-4">
                <button onclick="goPhonics()" class="btn-bounce w-full bg-gradient-to-r from-purple-400 to-purple-600 text-white rounded-2xl p-5 shadow-lg flex items-center gap-4">
                  <span class="text-5xl">üî§</span>
                  <div class="text-left">
                    <div class="font-bold text-xl">Letter Sounds</div>
                    <div class="text-sm opacity-90">A-Z Phonics</div>
                  </div>
                </button>
                
                <button onclick="goBooks()" class="btn-bounce w-full bg-gradient-to-r from-blue-400 to-blue-600 text-white rounded-2xl p-5 shadow-lg flex items-center gap-4">
                  <span class="text-5xl">üìñ</span>
                  <div class="text-left">
                    <div class="font-bold text-xl">Read Books</div>
                    <div class="text-sm opacity-90">Easy stories for beginners</div>
                  </div>
                </button>
              </div>
            </div>
          </div>`;
      }

      else if (currentGame === 'phonics') {
        const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('');
        const colors = ['bg-red-400','bg-orange-400','bg-yellow-400','bg-green-400','bg-teal-400','bg-blue-400','bg-indigo-400','bg-purple-400','bg-pink-400'];
        
        let letterBtns = letters.map((l, i) => {
          const color = colors[i % colors.length];
          const data = phonics[l];
          return `
            <button id="letter-${l}" onclick="speakLetter('${l}')" class="letter-btn ${color} text-white rounded-2xl p-2 shadow-lg flex flex-col items-center justify-center aspect-square">
              <span class="text-2xl font-bold">${l}</span>
              <span class="text-lg">${data.emoji}</span>
            </button>`;
        }).join('');

        html = `
          <div class="min-h-screen bg-gradient-to-b from-purple-400 via-purple-500 to-indigo-600 p-4 pb-20">
            <div class="flex items-center justify-between mb-4">
              <button onclick="goMenu()" class="bg-white/30 text-white rounded-full w-10 h-10 text-xl btn-bounce">‚Üê</button>
              <h1 class="text-2xl font-bold text-white drop-shadow-lg">Letter Sounds üî§</h1>
              <div class="w-10"></div>
            </div>
            <p class="text-center text-white mb-4 text-lg">üëÜ Tap a letter to hear its sound!</p>
            <div class="bg-white/95 rounded-3xl p-4 shadow-2xl">
              <div class="grid grid-cols-5 gap-2">${letterBtns}</div>
            </div>
            <div class="mt-4 bg-white/20 rounded-2xl p-4 text-center text-white">
              <p class="text-sm">üí° Tip: Letters make SOUNDS, not names!</p>
              <p class="text-sm">"B" says "buh" not "bee"</p>
            </div>
          </div>`;
      }

      else if (currentGame === 'books') {
        let bookCards = books.map((book, i) => `
          <button onclick="openBook(${i})" class="btn-bounce bg-white rounded-2xl p-4 shadow-lg text-center">
            <div class="text-5xl mb-2">${book.cover}</div>
            <div class="font-bold text-gray-800">${book.title}</div>
            <div class="text-xs text-gray-500">Book ${i + 1}</div>
          </button>
        `).join('');

        html = `
          <div class="min-h-screen bg-gradient-to-b from-blue-400 via-blue-500 to-indigo-600 p-4">
            <div class="flex items-center justify-between mb-4">
              <button onclick="goMenu()" class="bg-white/30 text-white rounded-full w-10 h-10 text-xl btn-bounce">‚Üê</button>
              <h1 class="text-2xl font-bold text-white drop-shadow-lg">My Books üìö</h1>
              <div class="w-10"></div>
            </div>
            <p class="text-center text-white mb-6 text-lg">Pick a book to read!</p>
            <div class="grid grid-cols-2 gap-4">${bookCards}</div>
            <div class="mt-6 bg-white/20 rounded-2xl p-4 text-center text-white">
              <p class="text-sm">üìñ Start with Book 1 and work your way up!</p>
            </div>
          </div>`;
      }

      else if (currentGame === 'reading') {
        const book = books[currentBook];
        const page = book.pages[currentPage];
        const totalPages = book.pages.length;
        
        // Create clickable words
        const wordSpans = page.text.split(' ').map((word, i) => 
          `<span class="word-span cursor-pointer hover:text-purple-600 transition-all" onclick="speakWord('${word.replace(/[.,!]/g, '')}')">${word}</span>`
        ).join(' ');

        html = `
          <div class="min-h-screen bg-gradient-to-b from-amber-100 via-orange-100 to-yellow-100 p-4 flex flex-col">
            <div class="flex items-center justify-between mb-4">
              <button onclick="goBooks()" class="bg-gray-200 text-gray-700 rounded-full w-10 h-10 text-xl btn-bounce">‚Üê</button>
              <h1 class="text-lg font-bold text-gray-700">${book.title}</h1>
              <div class="text-sm text-gray-500">${currentPage + 1}/${totalPages}</div>
            </div>
            
            <div class="flex-1 bg-white rounded-3xl shadow-2xl p-6 flex flex-col">
              <!-- Image area -->
              <div class="flex-1 flex items-center justify-center text-8xl mb-4 min-h-32">
                ${page.image}
              </div>
              
              <!-- Text area -->
              <div class="bg-gray-50 rounded-2xl p-6 mb-4">
                <p class="text-3xl font-bold text-center text-gray-800 leading-relaxed">${wordSpans}</p>
              </div>
              
              <!-- Read aloud button -->
              <button onclick="readAloud()" class="btn-bounce bg-gradient-to-r from-green-400 to-emerald-500 text-white rounded-full py-3 px-6 font-bold text-lg shadow-lg mx-auto flex items-center gap-2">
                <span>üîä</span> Read to Me
              </button>
            </div>
            
            <!-- Navigation -->
            <div class="flex justify-between mt-4">
              <button onclick="prevPage()" class="btn-bounce bg-white rounded-full w-14 h-14 text-2xl shadow-lg ${currentPage === 0 ? 'opacity-30' : ''}" ${currentPage === 0 ? 'disabled' : ''}>‚¨ÖÔ∏è</button>
              <div class="flex gap-2 items-center">
                ${Array(totalPages).fill(0).map((_, i) => `<div class="w-3 h-3 rounded-full ${i === currentPage ? 'bg-orange-400' : 'bg-gray-300'}"></div>`).join('')}
              </div>
              <button onclick="nextPage()" class="btn-bounce bg-white rounded-full w-14 h-14 text-2xl shadow-lg ${currentPage === totalPages - 1 ? 'opacity-30' : ''}" ${currentPage === totalPages - 1 ? 'disabled' : ''}>‚û°Ô∏è</button>
            </div>
          </div>`;
      }

      app.innerHTML = html;
    }

    render();
  </script>
</body>
</html>
